<!DOCTYPE html>
<html>
<head>
  <title>Login and Signup</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 400px; margin: auto; padding: 20px; }
    input, button { display: block; width: 100%; padding: 8px; margin: 10px 0; }
    button { background-color: #333; color: #fff; border: none; cursor: pointer; }
    .section { margin-bottom: 40px; }
  </style>
</head>
<body>
  <div class="section">
    <h2>Login</h2>
    <input type="text" id="loginUsername" placeholder="Username">
    <input type="password" id="loginPassword" placeholder="Password">
    <button onclick="loginUser()">Login</button>
  </div>

  <div class="section">
    <h2>Signup</h2>
    <input type="text" id="signupUsername" placeholder="Username">
    <input type="email" id="signupEmail" placeholder="Email">
    <input type="password" id="signupPassword" placeholder="Password">
    <button onclick="signupUser()">Signup</button>
  </div>

  <script>
    const API_BASE = '/api/accounts';

    async function loginUser() {
      const response = await fetch(`${API_BASE}/login/`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          username: document.getElementById('loginUsername').value,
          password: document.getElementById('loginPassword').value
        })
      });
      const data = await response.json();
      if (data.access) {
        localStorage.setItem('access', data.access);
        alert('Login successful');
      } else {
        alert('Login failed');
      }
    }

    async function signupUser() {
      const response = await fetch(`${API_BASE}/register/`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          username: document.getElementById('signupUsername').value,
          email: document.getElementById('signupEmail').value,
          password: document.getElementById('signupPassword').value
        })
      });
      if (response.ok) {
        alert('Signup successful');
      } else {
        alert('Signup failed');
      }
    }
  </script>
</body>
</html>
